# Profil de production activé avec la variable d'environnement SPRING_PROFILES_ACTIVE=prod
# On ne recrée pas la base de données automatiquement en production, on ne fait que valider le schéma
spring.jpa.hibernate.ddl-auto=validate

# Configuration JDBC PostgreSQL pour la production (Hébergé sur Koyeb/Supabase/Render/Neon etc.)
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Optionnel : dialecte pour forcer l'optimisation Postgres
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Configuration Mailgun (Redondant mais sécurité)
spring.mail.host=smtp.mailgun.org
spring.mail.port=587
spring.mail.username=${MAILGUN_USERNAME}
spring.mail.password=${MAILGUN_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=*

# Exposer correctement les configurations derrière un proxy en production (Koyeb/Heroku TLS)
server.forward-headers-strategy=native

# Logs de production (moins verbeux pour alléger les serveurs)
logging.level.org.springframework=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.pharmacie=INFO
spring.jpa.show-sql=false
